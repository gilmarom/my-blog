
   
    
<div fxLayout = "column"  fxLayoutAlign="center center" style="margin-top: 50px;">
        <h1>Let's start with Angular</h1>
        <h3>welcome angular 5</h3>  
        <p>In a nutshell,  Angular is a component framework, we usually apply on it the MVC architecture.
           The conventional way to use Angular is to divide the app to components, services and models.
           There isn't any core difference between components and services, both are just classes.
           the functionality of each, is defined by importing from the angular/core module different decorators.
           later we will see an example of code but for now just remember!!!,
           Angular itself is built from java script modules, @angular/core module is one of them and he's responsible of many tools for starting our Angular app   
         </p>
         <p>
            <li><strong>component - </strong> gets a @Component decorator and it handles the view's elements and the logic to the specific view, so 
            you can say it's the view and the controller both in mvc architecture.</li>
            <li><strong>service - </strong> will be decorated with @injectable and it's main job is to inject the object (model) to the
             component. an example of a service will be the communication between the client and server.</li>         
          </p>
          <br>
          <h1>Modules</h1>
          
          <p><strong>NgModule</strong> is the first basic structure you meet when coding an app with Angular.
            An NgModule is a class decorated with @NgModule. This component is like the instructions for the
            module's communication with the rest of the app. lets see its jobs....  
          
            <li>Declare which components, directives, and pipes belong to the module.</li>
            <li>Make some of those classes public so that other component templates can use them</li>
            <li>Import other modules with the components, directives, and pipes needed by the components in this module.</li>
            <li>Provide services at the application level that any application component can use.</li>
          </p>
          <h3>here`s example of NgModule</h3>
        
          <div><pre>
                  
                          I created an angular app by writing in the cmd

                                        <strong>ng new angular-src</strong> 

                          this is how the basic stracture of most angular 4 apps look like, most 
                          of the tools souch as angular/cli, ionic and ex` will automatcliy 
                          preduce the rest of the files you need to set the enviornment you
                          need.
                          Add the components, services and models folders under the 
                          app folder, then go to the components folder and write:                                                                          
                                                    
                                                                    <strong>ng g component "file name"</strong>

                           and then go to the services folder and write:           
                                       
                                                  <strong>ng g service "service name"</strong> 
                 </pre>  
          </div>
          <app-tree-view></app-tree-view>
          <div>  
                  <pre id="code">
            
                          
                   import &#123; NgModule &#125; from '@angular/core';
                   import &#123; BrowserModule &#125; from '@angular/platform-browser';
                   import &#123; RouterModule, Routes &#125; from '@angular/router';
                   import &#123; HttpModule &#125; from '@angular/http'; 
                   import &#123; FormsModule , ReactiveFormsModule &#125; from '@angular/forms';
                              
                   import &#123; AppComponent &#125; from './app.component';    
                   import &#123; NavbarComponent &#125; from './components/navbar/navbar.component';
                   import &#123; ContactsService &#125; from './services/contacts.service';
                   import &#123; ResturantListComponent &#125; from './components/resturant-list/resturant-list.component';
                            
                      @NgModule(&#123;
                      imports: [ BrowserModule,
                                 HttpModule,               
                                 RouterModule.forRoot(appRoutes)],
                      exports:[ResturantListComponent],          
                      providers: [ContactsService ],
                      declarations: [AppComponent, NavbarComponent],
                      bootstrap: [AppComponent]
                          &#125;)
                          export class AppModule &#123; &#125;
                          
                          </pre>
          
          </div>
      <br> 
      <p>We can learn a lot from this example on how to work with Angular,
      <strong>The Providers and Declarations</strong> are the two main structures in the NgModule 
        and there is a big difference between them in the scope/visibility.
     </p>
      <p>
        <li>Providers - Global scope (public visibility).</li>
        <li>Declarations - Local scope (private visibility).</li>
      <br>
        As a result, components, pips and directives declared are usable only in 
        the current module, for using them in another module you will need to export them.
        On the contrary, services you provided will be available / injectable anywhere in your app, 
        just by import the service to the providers as we did in the example above.  
      </p>
      
      
     
     
      <span>Contacts Form</span>
     
     
       
      
      <mat-tab-group style="width:100%">
           
      <mat-tab label="contacts.component.ts">
            <pre id="code">

                            import &#123; Component, OnInit, AfterViewChecked, ViewChild, 
                              OnChanges &#125; from '@angular/core';
                            import &#123; NgForm  &#125; from '@angular/forms';
                            import &#123; ContactsService &#125; from '../../services/contacts.service';
                            import &#123; FormBuilder, FormGroup, Validators &#125; from '@angular/forms';
                            import &#123; ContactSubmission &#125; from '../../models/contact-submission';


                            @Component(&#123;
                              selector: 'app-contacts',
                              templateUrl: './contacts.component.html',
                              styleUrls: ['./contacts.component.css']
                              &#125;)
                          
                            export class ContactsComponent implements OnInit&#123;
                              contactSubmission: ContactSubmission;
                              rForm: FormGroup;
                              contactForm: NgForm;
                              post: any;    // A property for our submitted form
                              description: string = '';
                              name: string = '';
                              titleAlert:string = 'This field is required';
                              email: string='';
                              phone: string='';
                              website: string='';
                              contactModel: any=&#123;&#125;;
                              submitted = false;
                              charsLeft = 250;

                        
                            @ViewChild('contactForm') currentForm: NgForm;
                              submittedForm: any; // we will get rid of this later
                              formErrors = &#123;
                              'contactName': '',
                              'contactEmail': '',
                              'contactMessage': ''
                              &#125;;
                              validationMessages = &#123;
                              'contactName': &#123;
                              'required': 'Name is required.'
                              &#125;,
                              'contactEmail': &#123;
                                'required': 'Email is required.',
                                'email': 'Email must be in a valid format.'
                              &#125;,
                              'contactMessage': &#123;
                                'required': 'A message is required.'
                              &#125;
                            &#125;;
                            
                      
                            constructor(private fb: FormBuilder, private contactService: ContactsService) &#123;
                                this.contactSubmission= new ContactSubmission()
                            &#125;
                            
                            sendContactMsg(event)&#123;
                              this.contactService.sendContactMsg(this.contactModel).subscribe()
                            &#125;      

                            createMassage() &#123;
                                this.rForm = this.fb.group(&#123;
                                'name' : [this.contactSubmission.contactName, Validators.required],
                                'email':[this.contactSubmission.contactEmail ,Validators.compose([Validators.email, Validators.required])],
                                'phone': [this.contactSubmission.contactPhone, Validators.required], 
                                'website': [this.contactSubmission.contactWebsite, Validators.required],
                                'description' : [this.contactSubmission.contactMessage, Validators.compose([Validators.required, Validators.minLength(30), Validators.maxLength(500)])],
                                'validate' : '',
                                
                              &#125;);

                              this.rForm.valueChanges.subscribe(data => this.onValueChanged(data));
                              this.onValueChanged();
                            &#125;

                            ngOnInit()&#123;
                              this.createMassage();
                            &#125;

                            private onValueChanged(data?: any) &#123;
                              if (!this.rForm) &#123; return; 
                              &#125;
                              const form = this.rForm;

                              for (const field in this.formErrors) &#123;
                                // clear previous error message (if any)
                                this.formErrors[field] = '';
                                const control = form.get(field);

                                if (control && control.dirty && control.invalid) &#123;
                                  const messages = this.validationMessages[field];
                                  
                                  for (const key in control.errors) &#123;
                                    this.formErrors[field] += messages[key] + ' ';
                                  &#125;
                                &#125;
                              &#125;
                            &#125;
                            
                            submit() &#123;

                              this.contactSubmission = this.rForm.value;
                              this.contactService.sendContactMsg(this.contactSubmission).
                              subscribe(data => &#123;
                              this.contactSubmission = data; 
                              &#125;);
                              this.rForm.reset(); 
                              
                              console.log(JSON.stringify(this.contactSubmission));
                            &#125;
                          &#125;
    </pre>
      </mat-tab>
      <mat-tab label="contacts.service.ts"><pre>
              
                              import &#123; HttpClient ,HttpRequest &#125; from '@angular/common/http';
                              import &#123; Injectable, Input &#125; from '@angular/core';
                              import 'rxjs/add/operator/map';
                              import 'rxjs/add/operator/do';
                              import 'rxjs/add/operator/filter';
                              import 'rxjs/add/operator/catch';
                              import &#123; Observable &#125; from 'rxjs/Rx';
                              import &#123; ContactSubmission &#125; from '../models/contact-submission';


                              @Injectable()
                              export class ContactsService &#123;
                                contactSubmission : ContactSubmission [];
                                constructor(private http: HttpClient ) &#123;&#125;
                                
                                public sendContactMsg(contactSubmission: ContactSubmission): 
                                  Observable &lt;ContactSubmission&gt; &#123;
                                  return this.http.post&lt;ContactSubmission&gt;('api/contacts/sendContactMsg', contactSubmission);
                                &#125;
                              &#125;            
          </pre>
          </mat-tab>
  <mat-tab label="contact-submission.ts">
           <pre>
                              export class ContactSubmission &#123;
                              
                              public date: Date;
                              public contactName: string;
                              public contactEmail: string;
                              public contactMessage: string;
                              public contactWebsite: string;
                              public contactPhone: string;
                              public captcha: string;
                              &#125;
              </pre>
  </mat-tab>
</mat-tab-group>


 <P>  
  To be continue......
 </P>
      
    </div>
 
<!-- style tutorial !-->